<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Hackathon Warm-up: OCR + ERNIE</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css">
</head>

<body class="bg-light">
    <div class="container py-5">
        <h1 class="mb-4 text-center">OCR + ERNIE Demo</h1>

        <!-- Upload Section -->
        <div class="mb-3">
            <label for="imageInput" class="form-label">Sube una imagen con texto:</label>
            <input class="form-control" type="file" id="imageInput" accept="image/*">
        </div>

        <!-- Buttons -->
        <button id="processBtn" class="btn btn-primary">Procesar Imagen</button>

        <!-- Results -->
        <div class="mt-4">
            <h4>Texto reconocido (OCR):</h4>
            <pre id="ocrResult" class="bg-white p-3 border"></pre>

            <h4>Respuesta de ERNIE:</h4>
            <pre id="ernieResult" class="bg-white p-3 border"></pre>
        </div>
    </div>

    <script>
        const processBtn = document.getElementById('processBtn');
        const imageInput = document.getElementById('imageInput');
        const ocrResult = document.getElementById('ocrResult');
        const ernieResult = document.getElementById('ernieResult');

        processBtn.addEventListener('click', async () => {
            const file = imageInput.files[0];
            if (!file) {
                alert("Por favor sube una imagen primero.");
                return;
            }

            // 1. Convertir imagen a Base64
            const base64Image = await toBase64(file);

            // 2. Llamada a PaddleOCR-VL API (ejemplo placeholder)
            const ocrResponse = await fetch("https://api.paddleocr-vl.example/ocr", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ image: base64Image })
            });
            const ocrData = await ocrResponse.json();
            ocrResult.textContent = ocrData.text || "No se reconociÃ³ texto.";

            // 3. Llamada a ERNIE API (ejemplo placeholder)
            const ernieResponse = await fetch("https://api.ernie.example/generate", {
                method: "POST",
                headers: { "Content-Type": "application/json" },
                body: JSON.stringify({ prompt: ocrData.text })
            });
            const ernieData = await ernieResponse.json();
            ernieResult.textContent = ernieData.output || "No hubo respuesta.";
        });

        // Helper: convertir archivo a Base64
        function toBase64(file) {
            return new Promise((resolve, reject) => {
                const reader = new FileReader();
                reader.readAsDataURL(file);
                reader.onload = () => resolve(reader.result.split(",")[1]);
                reader.onerror = error => reject(error);
            });
        }
    </script>
</body>

</html>